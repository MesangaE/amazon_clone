<<<<<<< HEAD
<h1>amazon_clone</h1>

![image](https://github.com/user-attachments/assets/ae121445-b862-4c10-a109-81e1e6367603)

Today we will deploy the Amazon app in AWS ec2 using Terraform as an infrastructure-building tool. Then we automate the whole process using Jenkins which allows us continuous integration and continuous deployment (ci-cd) and then we set up Prometheus and Grafana for monitoring. To start this project, I decided to first clone the repo into my local and do modifications on the Terraform files (region, ami, I created a new keypair as well so I added that resource to the resource block)

=======
Deployment of Amazon clone app using Terraform and Jenkins ci-cd

Pre-requisite
AWS account
basics of terraform and Jenkins

Let's do it
before doing anything →
open your terminal and make a separate folder for Amazon →mkdir amazon
cd amazon
clone the GitHub repo
git clone https://github.com/Aakibgithuber/Amazon-app-Deployment-using-terraform-and-jenkins.git

<h3>STEPS</h3>
<h3>Step 1: Setup Terraform and configure aws on your local machine</h3>
  sudo su
  sudo apt update && sudo apt upgrade -y
  sudo apt install wget -y
  wget -O- https://apt.releases.hashicorp.com/gpg | sudo gpg --dearmor -o /usr/share/keyrings/hashicorp-archive-keyring.gpg
  echo "deb [signed-by=/usr/share/keyrings/hashicorp-archive-keyring.gpg] https://apt.releases.hashicorp.com $(lsb_release -cs) main" | sudo tee 
  /etc/apt/sources.list.d/hashicorp.list
  sudo apt update && sudo apt install terraform
  which terraform (/usr/bin/terraform)

  <h2>create an IAM user</h2>
  
  go to IAM on the console and click users
  Give your user a name, check the Provide user access to the management console, and then click on I want an IAM user option.

  ![Clonemesangauser](https://github.com/user-attachments/assets/787785a7-a10c-438b-bb42-ddbd27af70bd)

  
  choose a password for your user →click next
  Attach the policies directly to your IAM user → click next
  click on Create user


  ![cloneuser2](https://github.com/user-attachments/assets/7c08df31-2558-4469-9ab0-9a25fd01358d)


  ![cloneuser3](https://github.com/user-attachments/assets/d389e3f0-364c-4b7b-ae72-7cb4f7718775)


  download your password file if it is autogenerated otherwise it is your choice

  ![cloneuser4](https://github.com/user-attachments/assets/c20924a6-7a56-4983-bd0d-ce7724e7a775)

 
  Click on your newly created  IAM user →security credentials


 ![cloneuser5](https://github.com/user-attachments/assets/9079878b-388e-4b3e-95c7-7a20a9b65b79)

  
  
  scroll down to access keys and create an access keys


  ![clone user 6](https://github.com/user-attachments/assets/d6094bbc-3ac4-40e0-b4ec-2f3d2ca21f29)

  

  choose aws cli from the options listed



  ![cloneuser7](https://github.com/user-attachments/assets/c7705aa3-b164-4155-95dc-f90a64f0fb34)
  

  click next and download your CSV file for username and password

  

 ![cloneuser](https://github.com/user-attachments/assets/dd45f7dd-edc1-4dcf-a7d1-7866e38051cd)


  <br>
  go to your terminal and configure AWS with these user credentials

  ---bash
      sudo apt install awscli 
      aws configure
  ---


  ![configureaws](https://github.com/user-attachments/assets/5b8efb5a-400e-4f62-b5ea-de84457c6e2f)


  note →I will provide the administrator access for now but we are careful while attaching the policies on your workspace

  </br>
  
<h3>Step 2: Building a simple Infrastructure from code using Terraform</h3>

 cd JENKINS-TF

 ![main tfmodify](https://github.com/user-attachments/assets/cf66f730-928e-4018-ae45-b2bbf7e70301)



 ![newresources](https://github.com/user-attachments/assets/0ffcc126-2d50-43b7-bc4b-a43ea7ca5203)

 


modify the Main.tf file, with ami ID, key name, and region in the Provider.tf. I cloned the repo into my local and did the modifications and also changed the name of the repo before I pushed it to my Github and I cloned my modified repo.

main.tf includes user data which links install_jenkins.sh file on which execution install Jenkins,docker,trivy, and start the sonarqube container on port 9000


![initS](https://github.com/user-attachments/assets/1684f705-e5f4-4c77-94ca-5b3845b91e45)



so I decided to create a new key for the instance. so I added 2 resource blocks and I wanted also the mistakes that I made to be included in this screenshot. I had a typo when I was referring to the attribute local_file. It is always good to validate your terraform configuration before you plan. Instead of 3 resources in the original demo, I had 5 resources planned.


![validateS](https://github.com/user-attachments/assets/dd92bacd-a039-4af7-bc6d-0e4a31e4155d)


![applyS](https://github.com/user-attachments/assets/b010688c-d0cf-46e2-bc39-fdedd0bd9c0d)


![applyS1](https://github.com/user-attachments/assets/de806c08-4401-445c-897d-38a7a1b73875)



![applyS2](https://github.com/user-attachments/assets/7bfbe734-0575-4038-8900-afdeb1949c2b)





Rem that anytime you add another resource. In my case, I had to add the provider tls and needed to initialize it again. I had a lot of issues adding resource blocks for a keypair because arguments I had used before had become deprecated. Documentation is one place to get all the information you need.
 
Step 3 → Setup Sonarqube and Jenkins
Step 4 → ci-cd pipeline
Step5 → Monitering via Prmotheus and grafana
Step 6 → Terraform Destroy

My blog link for this project-->https://aakibkhan1.medium.com/project-7-deployment-of-amazon-clone-app-using-terraform-and-jenkins-ci-cd-32483787ea67
                
>>>>>>> master
